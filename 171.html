<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inventario de Guardas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f9;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #043366;
      color: white;
      text-align: center;
      padding: 20px;
    }
    h1 {
      margin: 0;
      font-size: 1.8em;
    }
    h2 {
      margin: 10px 0 0;
      font-size: 1.4em;
      color: #043366;
      text-align: center;
    }
    .container {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      gap: 20px;
      flex-wrap: wrap; /* ðŸ”‘ hace que en pantallas pequeÃ±as se acomode */
    }
    .image-box {
      flex: 1 1 300px;
      text-align: center;
    }
    .image-box img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .info-box {
      flex: 1 1 300px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .info-box p {
      font-size: 1.2em;
      margin: 10px 0;
    }
    /* ðŸ”‘ Adaptabilidad para mÃ³viles */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        align-items: center;
      }
      .info-box {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Inventario de Guardas</h1>
    <h2 id="codigo">CÃ“DIGO</h2>
  </header>
  <div class="container">
    <div class="image-box">
      <img id="imagen" src="" alt="Imagen del equipo">
    </div>
    <div class="info-box">
      <p><strong>Zona:</strong> <span id="zona"></span></p>
      <p><strong>Equipo:</strong> <span id="equipo"></span></p>
      <p><strong>Observaciones:</strong> <span id="observaciones"></span></p>
    </div>
  </div>

  <script>
    const url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQTDZrm8l5Hrina8ZCuxg6fJ2ZJvpE_JsGpLjnf0cs8fYiPqRDa1_dGHD9unq4g1g/pub?gid=1460194781&single=true&output=csv";

    async function loadCSV() {
      const response = await fetch(url);
      const data = await response.text();

      const rows = data.split("\n").map(r => r.split(","));

      // Cabeceras
      const headers = rows[0].map(h => h.trim().toLowerCase());
      const idxNum = headers.indexOf("nÂ°");
      const idxCodigo = headers.indexOf("cÃ³digo");
      const idxZona = headers.indexOf("zona");
      const idxEquipo = headers.indexOf("equipo");
      const idxObs = headers.indexOf("observaciones");
      const idxImg = headers.indexOf("imagen");

      // NÃºmero de pÃ¡gina = nombre del archivo (ejemplo: 3.html â†’ "3")
      const pageNumber = window.location.pathname.split("/").pop().replace(".html","");

      // Buscar fila que coincida con NÂ°
      const match = rows.find((r,i) => {
        if(i === 0) return false;
        return Number(r[idxNum]?.trim()) === Number(pageNumber);
      });

      if(match){
        document.getElementById("codigo").textContent = match[idxCodigo] || "Sin cÃ³digo";
        document.getElementById("zona").textContent = match[idxZona] || "-";
        document.getElementById("equipo").textContent = match[idxEquipo] || "-";
        document.getElementById("observaciones").textContent = match[idxObs] || "-";
        document.getElementById("imagen").src = match[idxImg] || "";
      } else {
        document.getElementById("codigo").textContent = "No encontrado";
      }
    }

    loadCSV();
  </script>
</body>
</html>
